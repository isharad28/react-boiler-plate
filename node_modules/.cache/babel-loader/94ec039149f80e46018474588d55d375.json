{"ast":null,"code":"var _jsxFileName = \"/Users/sharadchoudhary/Desktop/PracticeReactJsProject/PAM-fastie/src/Layout/Components/CommonTopBar/CommonTopBar.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect, useRef } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { getToken, logout } from \"../../../utils/token\";\nimport { get as _get } from \"lodash\";\nimport ReactPixel from 'react-facebook-pixel';\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav // NavItem,\n// NavLink,\n, CardBody, Card } from \"reactstrap\"; // import firebase from \"../../../Firebase/Firebase\";\n// import Autocomplete from \"react-autocomplete\";\n// import { isMobile } from \"react-device-detect\";\n\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CommonTopBar = ({\n  openLogin,\n  openLocation,\n  history,\n  clearCartData,\n  openSignup,\n  resetUserProfile,\n  userProfile,\n  userLocationName,\n  cartCount,\n  logoutUser,\n  showToastMessage,\n  resetToastMessage,\n  openFinetuneLocation,\n  closeFinetuneLocation,\n  searchProductList,\n  getSearchProductList,\n  resetSearchProductList,\n  needGuestCartSync,\n  needGuestCartSyncStart,\n  needGuestCartSyncReset,\n  addToCartSaveOnCheckout,\n  addToCart,\n  getProductList,\n  ...props\n}) => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const openLoginModal = () => {\n    // logoutUser();\n    needGuestCartSyncStart();\n    openLogin();\n  };\n\n  const cartSaveOnCheckout = flage => {\n    addToCartSaveOnCheckout(addToCart, response => {}, error => {});\n  };\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [Search, setSearch] = useState(\"\");\n  const [latitude, setLattitude] = useState();\n  const [longitude, setLongitude] = useState();\n  const [geoLocation, setGeoLocation] = useState(false);\n  const nv = useRef(null);\n  var inputSearchData;\n  useEffect(() => {\n    props.location.pathname == \"/\" && setSearch(\"\");\n    props.location.pathname == \"/\" && resetSearchProductList({});\n  }, [props.location]);\n\n  const useOutsideAlerter = ref => {\n    _s();\n\n    useEffect(() => {\n      /**\r\n       * Alert if clicked on outside of element\r\n       */\n      function handleClickOutside(event) {\n        if (ref.current && !ref.current.contains(event.target)) {\n          // alert(\"You clicked outside of me!\");\n          setIsOpen(false);\n        }\n      } // Bind the event listener\n\n\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      return () => {\n        // Unbind the event listener on clean up\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n    }, [ref]);\n  };\n\n  _s(useOutsideAlerter, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n  useEffect(() => {\n    inputSearchData && inputSearchData.addEventListener(\"focusout\", event => {\n      console.log(\"working\");\n      isMobile && toggle();\n    });\n    inputSearchData && inputSearchData.addEventListener(\"keypress\", event => {\n      console.log(\"working keypress\", event); // isMobile && toggle();\n    });\n  }, [inputSearchData]);\n\n  const toggle = () => {\n    inputSearchData = document.getElementById(\"searchInput\");\n    inputSearchData && inputSearchData.addEventListener(\"focusout\", event => {\n      isMobile && setIsOpen(false);\n    });\n    setIsOpen(!isOpen);\n  };\n\n  useEffect(() => {\n    if (needGuestCartSync === \"F\" && getToken()) {\n      cartSaveOnCheckout();\n      needGuestCartSyncReset();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [needGuestCartSync]);\n  const [isOpenSearch, setIsOpenSearch] = useState(false);\n\n  const toggleSearch = () => setIsOpenSearch(!isOpenSearch);\n\n  const wrapperRef = useRef(null);\n  useOutsideAlerter(wrapperRef);\n\n  const renderTopbar = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) // <li className=\"account\">\n    //   <Link to=\"\">\n    //     {userProfile ? `Welcome - ${userProfile.name}` : \"Welcome - Guest\"}\n    //     {userProfile && <i className=\"fa fa-angle-down\"></i>}\n    //   </Link>\n    //   <ul className=\"account_selection\">\n    //     {userProfile && (\n    //       <li>\n    //         <Link\n    //           to=\"\"\n    //           onClick={() => {\n    //             logout();\n    //             resetUserProfile();\n    //             clearCartData();\n    //             firebase\n    //               .auth()\n    //               .signOut()\n    //               .then(function () {\n    //                 showToastMessage({\n    //                   type: \"success\",\n    //                   message: \"User logout successfully\",\n    //                 });\n    //                 resetToastMessage();\n    //               })\n    //               .catch(function (error) {\n    //                 showToastMessage({\n    //                   type: \"error\",\n    //                   message: _get(error, \"message\", \"\"),\n    //                 });\n    //               });\n    //             logoutUser(\n    //               \"\",\n    //               (response) => {\n    //               },\n    //               (error) => {}\n    //             );\n    //           }}\n    //         >\n    //           Logout\n    //         </Link>\n    //       </li>\n    //     )}\n    //   </ul>\n    // </li>\n    ;\n  };\n\n  const selectProduct = (product, item) => {\n    console.log(product, item, \"productSearch\");\n    setSearch(\"\");\n    setIsOpen(false); // ReactPixel.trackCustom('Search',  search );\n\n    if (product == \"View More\") {\n      history.push(\"/category?q=\" + Search);\n    } else {\n      history.push(`/product/${item.id}/${item.slug}`);\n    }\n  };\n\n  const handleKeyPress = target => {\n    const search = target.target.value;\n    setSearch(search);\n\n    if (search.length > 3) {\n      getSearchProductList({\n        search\n      });\n    }\n  };\n\n  const handleEnterPress = target => {\n    const search = target.target.value;\n    setSearch(search);\n\n    if (search.length > 3 && target.which == 13) {\n      // debugger;\n      getProductList({\n        search: search,\n        order: \"created_at\",\n        forCategory: true\n      });\n      ReactPixel.trackCustom('Search', search // or set to empty string\n      ); //  debugger;\n\n      history.push(\"/category?q=\" + search);\n    }\n  };\n\n  const handleSearchClick = target => {\n    const search = document.getElementById(\"searchInput\").value;\n    setSearch(search);\n\n    if (search.length > 3) {\n      // debugger;\n      getProductList({\n        search: search,\n        order: \"created_at\",\n        forCategory: true\n      }); // debugger;\n\n      history.push(\"/category?q=\" + search);\n    }\n  };\n\n  useEffect(() => {\n    getLocation();\n  });\n  useEffect(() => {\n    renderTopbar();\n  }, [userProfile]);\n\n  function getLocation() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(getCoordinates, handleLocationError);\n    } else {\n      props.showToastMessage({\n        type: \"error\",\n        message: \"Geolocation is not supported by this browser.\"\n      });\n      props.resetToastMessage();\n    }\n  }\n\n  function getCoordinates(position) {\n    setLattitude(position.coords.latitude);\n    setLongitude(position.coords.longitude);\n    setGeoLocation(true);\n    localStorage.setItem(\"GeoLocationGloabl\", true);\n  }\n\n  function handleLocationError(error) {\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n        // props.showToastMessage({ type: \"error\", message: \"User denied the request for Geolocation.\" });\n        // props.resetToastMessage();\n        localStorage.removeItem(\"GeoLocationGloabl\");\n        break;\n\n      case error.POSITION_UNAVAILABLE:\n        props.showToastMessage({\n          type: \"error\",\n          message: \"Location information is unavailable.\"\n        });\n        props.resetToastMessage();\n        break;\n\n      case error.TIMEOUT:\n        props.showToastMessage({\n          type: \"error\",\n          message: \"The request to get user location timed out.\"\n        });\n        props.resetToastMessage();\n        break;\n\n      case error.UNKNOWN_ERROR:\n        props.showToastMessage({\n          type: \"error\",\n          message: \"An unknown error occurred.\"\n        });\n        props.resetToastMessage();\n        break;\n\n      default:\n        return null;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"main_menu home_menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top_nav\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-6 col-md-6 \",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"top_nav_left limit-text\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"ti-location-pin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 19\n                }, this), \" \", /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"\",\n                  onClick: geoLocation === false ? openLocation : openFinetuneLocation,\n                  children: localStorage.getItem(\"locationName\") ? `Delivering at : ${localStorage.getItem(\"locationName\")}` : \"Your delivery location\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-6 col-md-6 d-sm-block\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"top_nav_right\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"top_nav_menu\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row align-items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-12\",\n            ref: wrapperRef,\n            children: /*#__PURE__*/_jsxDEV(Navbar, {\n              light: true,\n              expand: \"lg\",\n              children: [/*#__PURE__*/_jsxDEV(NavbarBrand, {\n                id: \"RouterNavBrand\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/\",\n                  className: \"navbar-brand\",\n                  id: \"RouterNavLink\",\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/assets/img/logo.svg\",\n                    alt: \"logo\",\n                    className: \"mainlogo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 351,\n                    columnNumber: 21\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(NavbarToggler, {\n                onClick: toggle,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"menu_icon\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"ti-search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                className: \"main-menu-item1\",\n                id: \"navbarSupportedContent\",\n                isOpen: isOpen,\n                navbar: true,\n                children: /*#__PURE__*/_jsxDEV(Nav, {\n                  navbar: true,\n                  className: \"mainSearch\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    className: \"searchIcon\",\n                    title: \"search\",\n                    onClick: e => handleSearchClick(e),\n                    id: \"searchIcon\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"/assets/img/search.svg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 440,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"hearer_icon d-flex\",\n                children: [getToken() ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"dropdown\",\n                    children: [\"   \", /*#__PURE__*/_jsxDEV(Link, {\n                      id: \"dropdownMenuButton\",\n                      \"data-toggle\": \"dropdown\",\n                      \"aria-haspopup\": \"true\",\n                      \"aria-expanded\": \"false\",\n                      className: \"dropdown-toggle\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"ti-user\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 469,\n                        columnNumber: 189\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 469,\n                      columnNumber: 64\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dropdown-menu\",\n                      \"aria-labelledby\": \"dropdownMenuButton\",\n                      children: [/*#__PURE__*/_jsxDEV(Link, {\n                        className: \"dropdown-item\",\n                        to: getToken() && \"user-profile/my-profile\",\n                        children: \"My Profile\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 471,\n                        columnNumber: 35\n                      }, this), /*#__PURE__*/_jsxDEV(Link, {\n                        className: \"dropdown-item\",\n                        to: \"\",\n                        onClick: () => {\n                          logout();\n                          resetUserProfile();\n                          clearCartData();\n                          firebase.auth().signOut().then(function () {\n                            showToastMessage({\n                              type: \"success\",\n                              message: \"User logout successfully\"\n                            });\n                            resetToastMessage();\n                          }).catch(function (error) {\n                            showToastMessage({\n                              type: \"error\",\n                              message: _get(error, \"message\", \"\")\n                            });\n                          });\n                          logoutUser(\"\", response => {// resetUserProfile()\n                            // showToastMessage({ type: \"success\", message: \"User logout successfully\" })\n                          }, error => {});\n                        },\n                        children: \"Logout\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 474,\n                        columnNumber: 37\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 470,\n                      columnNumber: 35\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 35\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 34\n                }, this) : /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"\",\n                  onClick: !getToken() && openLoginModal,\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"ti-user\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 516,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dropdown cart\",\n                  children: /*#__PURE__*/_jsxDEV(Link, {\n                    to: \"/cart-order-list\",\n                    className: \"dropdown-toggle\",\n                    id: \"navbarDropdown3\",\n                    role: \"button\",\n                    \"data-toggle\": \"dropdown\",\n                    \"aria-haspopup\": \"true\",\n                    \"aria-expanded\": \"false\",\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-cart-plus\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 530,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: cartCount ? cartCount : 0\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 531,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 521,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n        isOpen: isOpenSearch,\n        className: \"search_input\",\n        id: \"search_input_box\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(CardBody, {\n            className: \"container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between search-inner\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ti-close\",\n                id: \"close_search\",\n                title: \"Close Search\",\n                onClick: () => toggleSearch()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(CommonTopBar, \"o7cxhy9588nmbnx3ATTnC4fvvn4=\", true);\n\n_c = CommonTopBar;\nexport default _c2 = withRouter(CommonTopBar);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CommonTopBar\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/sharadchoudhary/Desktop/PracticeReactJsProject/PAM-fastie/src/Layout/Components/CommonTopBar/CommonTopBar.js"],"names":["React","Fragment","useState","useEffect","useRef","Link","withRouter","getToken","logout","get","_get","ReactPixel","Collapse","Navbar","NavbarToggler","NavbarBrand","Nav","CardBody","Card","CommonTopBar","openLogin","openLocation","history","clearCartData","openSignup","resetUserProfile","userProfile","userLocationName","cartCount","logoutUser","showToastMessage","resetToastMessage","openFinetuneLocation","closeFinetuneLocation","searchProductList","getSearchProductList","resetSearchProductList","needGuestCartSync","needGuestCartSyncStart","needGuestCartSyncReset","addToCartSaveOnCheckout","addToCart","getProductList","props","openLoginModal","cartSaveOnCheckout","flage","response","error","isOpen","setIsOpen","Search","setSearch","latitude","setLattitude","longitude","setLongitude","geoLocation","setGeoLocation","nv","inputSearchData","location","pathname","useOutsideAlerter","ref","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","console","log","isMobile","toggle","getElementById","isOpenSearch","setIsOpenSearch","toggleSearch","wrapperRef","renderTopbar","selectProduct","product","item","push","id","slug","handleKeyPress","search","value","length","handleEnterPress","which","order","forCategory","trackCustom","handleSearchClick","getLocation","navigator","geolocation","getCurrentPosition","getCoordinates","handleLocationError","type","message","position","coords","localStorage","setItem","code","PERMISSION_DENIED","removeItem","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","getItem","e","firebase","auth","signOut","then","catch"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, useRef } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { getToken, logout } from \"../../../utils/token\";\r\nimport { get as _get } from \"lodash\";\r\nimport ReactPixel from 'react-facebook-pixel';\r\n\r\nimport {\r\n  Collapse,\r\n  Navbar,\r\n  NavbarToggler,\r\n  NavbarBrand,\r\n  Nav,\r\n  // NavItem,\r\n  // NavLink,\r\n  CardBody,\r\n  Card,\r\n} from \"reactstrap\";\r\n// import firebase from \"../../../Firebase/Firebase\";\r\n// import Autocomplete from \"react-autocomplete\";\r\n\r\n// import { isMobile } from \"react-device-detect\";\r\n\r\nconst CommonTopBar = ({\r\n  openLogin,\r\n  openLocation,\r\n  history,\r\n  clearCartData,\r\n  openSignup,\r\n  resetUserProfile,\r\n  userProfile,\r\n  userLocationName,\r\n  cartCount,\r\n  logoutUser,\r\n  showToastMessage,\r\n  resetToastMessage,\r\n  openFinetuneLocation,\r\n  closeFinetuneLocation,\r\n  searchProductList,\r\n  getSearchProductList,\r\n  resetSearchProductList,\r\n  needGuestCartSync,\r\n  needGuestCartSyncStart,\r\n  needGuestCartSyncReset,\r\n  addToCartSaveOnCheckout,\r\n  addToCart,\r\n  getProductList,\r\n  ...props\r\n}) => {\r\n  const openLoginModal = () => {\r\n    // logoutUser();\r\n    needGuestCartSyncStart();\r\n    openLogin();\r\n  };\r\n\r\n  const cartSaveOnCheckout = (flage) => {\r\n    addToCartSaveOnCheckout(\r\n      addToCart,\r\n      (response) => {},\r\n      (error) => {}\r\n    );\r\n  };\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [Search, setSearch] = useState(\"\");\r\n  const [latitude, setLattitude] = useState();\r\n  const [longitude, setLongitude] = useState();\r\n  const [geoLocation, setGeoLocation] = useState(false);\r\n  const nv = useRef(null);\r\n  var inputSearchData;\r\n  useEffect(() => {\r\n    props.location.pathname == \"/\" && setSearch(\"\");\r\n    props.location.pathname == \"/\" && resetSearchProductList({});\r\n  }, [props.location]);\r\n\r\n  const useOutsideAlerter = (ref) => {\r\n    useEffect(() => {\r\n      /**\r\n       * Alert if clicked on outside of element\r\n       */\r\n      function handleClickOutside(event) {\r\n        if (ref.current && !ref.current.contains(event.target)) {\r\n          // alert(\"You clicked outside of me!\");\r\n          setIsOpen(false);\r\n        }\r\n      }\r\n\r\n      // Bind the event listener\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n      return () => {\r\n        // Unbind the event listener on clean up\r\n        document.removeEventListener(\"mousedown\", handleClickOutside);\r\n      };\r\n    }, [ref]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    inputSearchData &&\r\n      inputSearchData.addEventListener(\"focusout\", (event) => {\r\n        console.log(\"working\");\r\n        isMobile && toggle();\r\n      });\r\n    inputSearchData &&\r\n      inputSearchData.addEventListener(\"keypress\", (event) => {\r\n        console.log(\"working keypress\", event);\r\n        // isMobile && toggle();\r\n      });\r\n  }, [inputSearchData]);\r\n\r\n  const toggle = () => {\r\n    inputSearchData = document.getElementById(\"searchInput\");\r\n    inputSearchData &&\r\n      inputSearchData.addEventListener(\"focusout\", (event) => {\r\n        isMobile && setIsOpen(false);\r\n      });\r\n    setIsOpen(!isOpen);\r\n  };\r\n  useEffect(() => {\r\n    if (needGuestCartSync === \"F\" && getToken()) {\r\n      cartSaveOnCheckout();\r\n      needGuestCartSyncReset();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [needGuestCartSync]);\r\n\r\n  const [isOpenSearch, setIsOpenSearch] = useState(false);\r\n\r\n  const toggleSearch = () => setIsOpenSearch(!isOpenSearch);\r\n  const wrapperRef = useRef(null);\r\n  useOutsideAlerter(wrapperRef);\r\n\r\n  const renderTopbar = () => {\r\n    return (\r\n      <></>\r\n      // <li className=\"account\">\r\n      //   <Link to=\"\">\r\n      //     {userProfile ? `Welcome - ${userProfile.name}` : \"Welcome - Guest\"}\r\n      //     {userProfile && <i className=\"fa fa-angle-down\"></i>}\r\n      //   </Link>\r\n      //   <ul className=\"account_selection\">\r\n      //     {userProfile && (\r\n      //       <li>\r\n      //         <Link\r\n      //           to=\"\"\r\n      //           onClick={() => {\r\n      //             logout();\r\n      //             resetUserProfile();\r\n      //             clearCartData();\r\n\r\n      //             firebase\r\n      //               .auth()\r\n      //               .signOut()\r\n      //               .then(function () {\r\n      //                 showToastMessage({\r\n      //                   type: \"success\",\r\n      //                   message: \"User logout successfully\",\r\n      //                 });\r\n      //                 resetToastMessage();\r\n      //               })\r\n      //               .catch(function (error) {\r\n      //                 showToastMessage({\r\n      //                   type: \"error\",\r\n      //                   message: _get(error, \"message\", \"\"),\r\n      //                 });\r\n      //               });\r\n      //             logoutUser(\r\n      //               \"\",\r\n      //               (response) => {\r\n                      \r\n      //               },\r\n      //               (error) => {}\r\n      //             );\r\n      //           }}\r\n      //         >\r\n      //           Logout\r\n      //         </Link>\r\n      //       </li>\r\n      //     )}\r\n      //   </ul>\r\n      // </li>\r\n    );\r\n  };\r\n\r\n  const selectProduct = (product, item) => {\r\n    console.log(product, item, \"productSearch\");\r\n    setSearch(\"\");\r\n    setIsOpen(false);\r\n      // ReactPixel.trackCustom('Search',  search );\r\n    if (product == \"View More\") {\r\n      history.push(\"/category?q=\" + Search);\r\n    } else {\r\n      history.push(`/product/${item.id}/${item.slug}`);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (target) => {\r\n    const search = target.target.value;\r\n  \r\n    setSearch(search);\r\n    if (search.length > 3) {\r\n      getSearchProductList({ search });\r\n    }\r\n  };\r\n\r\n  const handleEnterPress = (target) => {\r\n    const search = target.target.value;\r\n\r\n    setSearch(search);\r\n    if (search.length > 3 && target.which == 13) {\r\n     // debugger;\r\n      getProductList({ search: search, order: \"created_at\", forCategory:true });\r\n      ReactPixel.trackCustom('Search',  search // or set to empty string\r\n      );\r\n    //  debugger;\r\n      history.push(\"/category?q=\" + search);\r\n    }\r\n  };\r\n\r\n  const handleSearchClick = (target) => {\r\n    const search = document.getElementById(\"searchInput\").value;\r\n    setSearch(search);\r\n    if (search.length > 3) {\r\n     // debugger;\r\n      getProductList({ search: search, order: \"created_at\", forCategory:true });\r\n     // debugger;\r\n      history.push(\"/category?q=\" + search);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getLocation();\r\n  });\r\n\r\n  useEffect(() => {\r\n    renderTopbar();\r\n  }, [userProfile]);\r\n  function getLocation() {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        getCoordinates,\r\n        handleLocationError\r\n      );\r\n    } else {\r\n      props.showToastMessage({\r\n        type: \"error\",\r\n        message: \"Geolocation is not supported by this browser.\",\r\n      });\r\n      props.resetToastMessage();\r\n    }\r\n  }\r\n  function getCoordinates(position) {\r\n    setLattitude(position.coords.latitude);\r\n    setLongitude(position.coords.longitude);\r\n    setGeoLocation(true);\r\n    localStorage.setItem(\"GeoLocationGloabl\", true);\r\n  }\r\n  function handleLocationError(error) {\r\n    switch (error.code) {\r\n      case error.PERMISSION_DENIED:\r\n        // props.showToastMessage({ type: \"error\", message: \"User denied the request for Geolocation.\" });\r\n        // props.resetToastMessage();\r\n        localStorage.removeItem(\"GeoLocationGloabl\");\r\n        break;\r\n      case error.POSITION_UNAVAILABLE:\r\n        props.showToastMessage({\r\n          type: \"error\",\r\n          message: \"Location information is unavailable.\",\r\n        });\r\n        props.resetToastMessage();\r\n        break;\r\n      case error.TIMEOUT:\r\n        props.showToastMessage({\r\n          type: \"error\",\r\n          message: \"The request to get user location timed out.\",\r\n        });\r\n        props.resetToastMessage();\r\n        break;\r\n      case error.UNKNOWN_ERROR:\r\n        props.showToastMessage({\r\n          type: \"error\",\r\n          message: \"An unknown error occurred.\",\r\n        });\r\n        props.resetToastMessage();\r\n        break;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  return (\r\n    <Fragment>\r\n      <header className=\"main_menu home_menu\">\r\n        <div className=\"top_nav\">\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-sm-6 col-md-6 \">\r\n                <div className=\"top_nav_left limit-text\">\r\n                  <i className=\"ti-location-pin\"></i>{\" \"}\r\n                  {/* <Link href=\"#\" onClick={openFinetuneLocation}> */}\r\n                  <Link\r\n                    to=\"\"\r\n                    onClick={\r\n                      geoLocation === false\r\n                        ? openLocation\r\n                        : openFinetuneLocation\r\n                    }\r\n                  >\r\n                    {localStorage.getItem(\"locationName\")\r\n                      ? `Delivering at : ${localStorage.getItem(\r\n                          \"locationName\"\r\n                        )}`\r\n                      : \"Your delivery location\"}\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-sm-6 col-md-6 d-sm-block\">\r\n                <div className=\"top_nav_right\">\r\n                  <ul className=\"top_nav_menu\">\r\n                    {/* <li className=\"currency\">\r\n                                            <Link href=\"#\">\r\n                                                INR\r\n\t\t\t\t\t\t\t\t\t\t<i className=\"fa fa-angle-down\"></i>\r\n                                            </Link>\r\n                                            <ul className=\"currency_selection\">\r\n                                                <li><Link href=\"#\">QAR</Link></li>\r\n                                                <li><Link href=\"#\">INR</Link></li>\r\n                                            </ul>\r\n                                        </li>\r\n                                        <li className=\"language\">\r\n                                            <Link href=\"#\">\r\n                                                EN\r\n\t\t\t\t\t\t\t\t\t\t<i className=\"fa fa-angle-down\"></i>\r\n                                            </Link>\r\n                                            <ul className=\"language_selection\">\r\n                                                <li><Link href=\"#\">EN</Link></li>\r\n                                                <li><Link href=\"#\">ARB</Link></li>\r\n                                            </ul>\r\n                                        </li> */}\r\n                    {/* {renderTopbar()} */}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"container\">\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col-lg-12\" ref={wrapperRef}>\r\n              <Navbar light expand=\"lg\">\r\n                <NavbarBrand id=\"RouterNavBrand\">\r\n                  <Link to=\"/\" className=\"navbar-brand\" id=\"RouterNavLink\">\r\n                    {\" \"}\r\n                    <img\r\n                      src=\"/assets/img/logo.svg\"\r\n                      alt=\"logo\"\r\n                      className=\"mainlogo\"\r\n                    />{\" \"}\r\n                  </Link>\r\n                </NavbarBrand>\r\n                <NavbarToggler onClick={toggle}>\r\n                  <span className=\"menu_icon\">\r\n                    <i className=\"ti-search\"></i>\r\n                  </span>\r\n                </NavbarToggler>\r\n                <Collapse\r\n                  className=\"main-menu-item1\"\r\n                  id=\"navbarSupportedContent\"\r\n                  isOpen={isOpen}\r\n                  navbar\r\n                >\r\n                  <Nav navbar className=\"mainSearch\">\r\n                    {/* <NavItem>\r\n                      <NavLink\r\n                        tag={Link}\r\n                        to=\"/\"\r\n                        onClick={() => isMobile && toggle()}\r\n                      >\r\n                        Home\r\n                      </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                      <NavLink\r\n                        tag={Link}\r\n                        to=\"/category\"\r\n                        onClick={() => isMobile && toggle()}\r\n                      >\r\n                        Shop Now\r\n                      </NavLink>\r\n                    </NavItem>\r\n                    {/* <NavItem>\r\n                                            <NavLink tag={Link} to=\"/sell-with-us\" onClick={()=>isMobile && toggle()}>Sell With Us </NavLink>\r\n                                        </NavItem> */}\r\n                    {/* <NavItem>\r\n                      <NavLink\r\n                        tag={Link}\r\n                        to=\"/contact\"\r\n                        onClick={() => isMobile && toggle()}\r\n                      >\r\n                        Contact\r\n                      </NavLink>\r\n                    </NavItem>  */}\r\n\r\n                    {/* <Autocomplete\r\n                      getItemValue={(item) => item.name}\r\n                      items={searchProductList}\r\n                      inputProps={{\r\n                        id: \"searchInput\",\r\n                        placeholder: \"Search your products here...\",\r\n                        onKeyPress: (e) => {\r\n                          handleEnterPress(e);\r\n                        },\r\n                        maxlength:50\r\n                        // onKeyPress:{(e) => handleKeyPress(e)}\r\n                      }}\r\n                      renderItem={(item, isHighlighted) => (\r\n                        <div\r\n                          className=\"searchdataList\"\r\n                          style={{\r\n                            background: isHighlighted ? \"#f2f2f2\" : \"#ffffff\",\r\n                          }}\r\n                        >\r\n                          <img\r\n                            height=\"40\"\r\n                            width=\"40 \"\r\n                            src={_get(item, \"thumbnail\", \"\")}\r\n                            alt=\"\"\r\n                          />{\" \"}\r\n                          {item.name}\r\n                        </div>\r\n                      )}\r\n                      value={Search}\r\n                      //   onChange={(e) => (value = e.target.value)}\r\n                      onChange={(e) => handleKeyPress(e)}\r\n                      onSelect={(val, item) => selectProduct(val, item)}\r\n                    /> */}\r\n                    <a\r\n                      className=\"searchIcon\"\r\n                      title=\"search\"\r\n                      onClick={(e) => handleSearchClick(e)}\r\n                      id=\"searchIcon\"\r\n                    >\r\n                      <img src=\"/assets/img/search.svg\" />\r\n                    </a>\r\n                    {/* <UncontrolledDropdown nav inNavbar>\r\n                                            <DropdownToggle nav caret>\r\n                                                Options\r\n                                            </DropdownToggle>\r\n                                            <DropdownMenu right>\r\n                                                <DropdownItem>\r\n                                                    Option 1\r\n                                                </DropdownItem>\r\n                                                <DropdownItem>\r\n                                                    Option 2\r\n                                                </DropdownItem>\r\n                                                <DropdownItem divider />\r\n                                                <DropdownItem>\r\n                                                    Reset\r\n                                                </DropdownItem>\r\n                                            </DropdownMenu>\r\n                                        </UncontrolledDropdown> */}\r\n                  </Nav>\r\n                  {/* <NavbarText>Simple Text</NavbarText> */}\r\n                </Collapse>\r\n                \r\n                <div className=\"hearer_icon d-flex\">\r\n  \r\n                  {/* <Link id=\"search_1\">\r\n                    <i className=\"ti-search\" onClick={() => toggleSearch()}></i>\r\n                  </Link> */}\r\n                  {getToken() ? (<div>\r\n                                  <div className=\"dropdown\">   <Link  id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" className=\"dropdown-toggle\"><i className=\"ti-user\"></i></Link>  \r\n                                  <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">  \r\n                                  <Link className=\"dropdown-item\" to={getToken() && \"user-profile/my-profile\"}>\r\n                                    My Profile\r\n                                    </Link> \r\n                                    <Link\r\n                                    className=\"dropdown-item\"\r\n                to=\"\"\r\n                onClick={() => {\r\n                  logout();\r\n                  resetUserProfile();\r\n                  clearCartData();\r\n\r\n                  firebase\r\n                    .auth()\r\n                    .signOut()\r\n                    .then(function () {\r\n                      showToastMessage({\r\n                        type: \"success\",\r\n                        message: \"User logout successfully\",\r\n                      });\r\n                      resetToastMessage();\r\n                    })\r\n                    .catch(function (error) {\r\n                      showToastMessage({\r\n                        type: \"error\",\r\n                        message: _get(error, \"message\", \"\"),\r\n                      });\r\n                    });\r\n                  logoutUser(\r\n                    \"\",\r\n                    (response) => {\r\n                      // resetUserProfile()\r\n                      // showToastMessage({ type: \"success\", message: \"User logout successfully\" })\r\n                    },\r\n                    (error) => {}\r\n                  );\r\n                }}\r\n              >\r\n                Logout\r\n              </Link>\r\n                                    </div>  \r\n                                     </div>\r\n                    \r\n                    </div>\r\n                  ) : (\r\n                    <Link to=\"\" onClick={!getToken() && openLoginModal}>\r\n                      <i className=\"ti-user\"></i>\r\n                    </Link>\r\n                  )}\r\n                  {/* <Link><i className=\"ti-settings\" onClick={() => toggleSearch()}></i></Link> */}\r\n                  <div className=\"dropdown cart\">\r\n                    <Link\r\n                      to=\"/cart-order-list\"\r\n                      className=\"dropdown-toggle\"\r\n                      id=\"navbarDropdown3\"\r\n                      role=\"button\"\r\n                      data-toggle=\"dropdown\"\r\n                      aria-haspopup=\"true\"\r\n                      aria-expanded=\"false\"\r\n                    >\r\n                      <i className=\"fas fa-cart-plus\"></i>\r\n                      <span>{cartCount ? cartCount : 0}</span>\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </Navbar>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <Collapse\r\n          isOpen={isOpenSearch}\r\n          className=\"search_input\"\r\n          id=\"search_input_box\"\r\n        >\r\n          <Card>\r\n            <CardBody className=\"container\">\r\n              <div className=\"d-flex justify-content-between search-inner\">\r\n                {/* <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"search_input\"\r\n                  placeholder=\"Search Here------\"\r\n                  onKeyPress={(e) => handleKeyPress(e)}\r\n                /> */}\r\n\r\n                <button type=\"submit\" className=\"btn\"></button>\r\n                <span\r\n                  className=\"ti-close\"\r\n                  id=\"close_search\"\r\n                  title=\"Close Search\"\r\n                  onClick={() => toggleSearch()}\r\n                ></span>\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n        </Collapse>\r\n      </header>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default withRouter(CommonTopBar);\r\n"]},"metadata":{},"sourceType":"module"}